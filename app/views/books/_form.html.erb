<%= form_for @book, html: { multiplepart: true, class: 'book-form' } do |f| %>
	<%= render 'share/flash_messages' %>
	<%= render 'share/form_error_messages', form: f %>
	<div class="form-group">
		<%= f.text_field :name, placeholder: 'Name', class: 'form-control' %>
	</div>
	<div class="form-group">
		<%= f.text_field :author, placeholder: 'Author', class: 'form-control' %>
	</div>
	<div class="form-group">
		<%= f.text_field :price, placeholder: 'Price', class: 'form-control' %>
	</div>
	<div class="form-group">
		<%= f.text_area :description, placeholder: 'Description', class: 'form-control' %>
	</div>
	<div class="form-group">
		<label class="control-label">Book cover</label>
		<%= f.file_field :picture %>
	</div>
	<div class="form-group">
		<%= f.submit 'Create', class: 'btn btn-success' %>
	</div>
<% end %>

<script>
	$('form.book-form').validate({
		rules: {
			'book[name]': {
				required: true,
				format: /^[a-z0-9-]+$/i
			},
			'book[author]': {
				required: true,
				format: /^[a-z0-9-]+$/i
			}
		},
		messages: {
			'book[name]': {
				required: '<%= @book.errors.generate_message :name, :blank %>',
				format: '<%= @book.errors.generate_message :name, :format %>'
			},
			'book[author]': {
				required: '<%= @book.errors.generate_message :author, :blank %>',
				format: '<%= @book.errors.generate_message :author, :format %>'
			}
		}
	});
</script>